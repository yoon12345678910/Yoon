<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>클로저 : 내부 함수 </title>
<script>
</script>
</head>

<body>

<script>
//이유: 비객체지향 언어에서 객체지향 흉내를 내기위해서
"use strict";
//클로저 : 내부함수
//사용이유 : 하위 함수를 생성(복제)함으로써 독자적인 함수운영가능

function getInterestComputer(type){
	if(type == "보통예금"){
		return function(money){
			return money *= 0.021;
		};
	}else if(type == "정기예금"){
		return function(money){
		      return money *= 0.035;
		};
	}else{
		return function(money){
		      return money *= 0.008;
		};
	}
}

var func1 = getInterestComputer("보통예금");
var func2 = getInterestComputer("정기예금");
var func3 = getInterestComputer("기타");

console.log("보통예금 이자:" , func1(1000000) + "원");
console.log("정기예금 이자:" , func2(1000000) + "원");
console.log("기타 기본 이자:" , func3(1000000)+ "원");

/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
console.log("\n클로저를 사용하지 않고 만든 계산기");

 //클로저를 사용하지 않고 만든 계산기
var result = 0;
function compute(op, v1){
	if(op == '+'){
		result += v1;
	}else if(op == '-'){
		result -= v1;
	}else if(op == '*'){
	  result *= v1;
	}else if(op == '/'){
		result /= v1;
  }
}

//독자적인 계산 불가 => 순차적으로 계산해야 함
//식1:10 + 20 * 2 - 7/5 =
//식2:7 * 3 - 5  
compute('+',10);
compute('+',20);
compute('*',2);
compute('-',7);
compute('/',5);

console.log("result = ", result); 

/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
//클로저(내장함수)를 사용하여 독자 계산기 만들기
function makeComputer(){
//클로저가 사용할 로컬 변수 선언
//클로저는 로컬변수를 복제하여 자신만의 영역에서(클로저영역)관리한다.

var result = 0; //함수 안에 선언된 변수(로컬변수)는 함수 호출이 끝나면 제거됨
                  //=> 매번 함수 호출 할 때 마다 생성됨
                  
//익명 함수 사용하여 클로저 선언 및 리턴
//같은 함수를 여러 개 만들어서 사용해야 하는 이유
//답)클로저의 작업 결과를 **********별도로 관리**********하기 위해서!!!
  function compute2(op, v1){
		  if(op == '+'){
			    result += v1;
			  }else if(op == '-'){
			    result -= v1;
			  }else if(op == '*'){
			    result *= v1;
			  }else if(op == '/'){
			    result /= v1;
			  }
		  return result;
		  
			}
	//클로저 리턴
	return compute2;
}

//c1 계산기
var c1 = makeComputer();

//c2 계산기
var c2 = makeComputer();

//식1:10 * 7 - 5 = ?
//식2:18-5 /3 =?
//식1 와 식2를 동시에 계산
console.log("\n식1 와 식2를 동시에 계산");
console.log("1번째");
console.log('식 1: 더하기', c1('+',10)); //식1 계산 0+10;
console.log('식 2: 더하기',c2('+',18)); //식2 계산 0+18;
console.log("2번째");
console.log('식 1: 곱하기',c1('*',7)); //식1 계산 10*7;
console.log('식 2: 빼기',c2('-',5)); //식2 계산 18-5;
console.log("3번째");
console.log('식 1: 빼기', c1('-',5)); //식1 계산 70-5;
console.log('식 2: 나누기',c2('/',3)); //식2 계산 13/3;
console.log("계산결과");
console.log("c1계산기result:", c1(result));
console.log("c2계산기result:", c2(result));


</script>

</body>
</html>















